<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">
    <title>Map</title>
    <script src="init.bundle.js"></script>
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
 
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  </head>

  
  <body >
     <div id="mapid" style="height: 480px"></div>
    
  </body>
     <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
   <script src="https://d3js.org/d3.v5.min.js"></script>
   <script src="leaflet-slider/dist/leaflet-slider.js"></script>
 <script src="https://d3js.org/d3-hexbin.v0.2.min.js"></script>
 <script src="https://d3js.org/d3-scale.v3.min.js"></script>
   <script>

//     	var mymap = L.map('mapid').setView([-33.865143, 151.209900], 13);

//     	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
// 	attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
// 	maxZoom: 18,
// 	id: 'mapbox.satellite',
// 	accessToken: 'pk.eyJ1IjoidGhlc25pcGVyIiwiYSI6ImNrMDg0N2NvNTBlbWszZHFwMXFoN3R5eGwifQ.15ZYPYGqB2AcEQCPebdNPQ'
// }).addTo(mymap);


      // leaflet map
      var mymap = L.map('mapid').setView([-33, 151], 13)
      .addLayer(new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"))
	  
	  
	  var num_rows = 20
      var num_columns = 20
 
      //SVG sizes and margins
      var margin = {
      top: 50,
      right: 20,
      bottom: 20,
      left: 50
      },
      width = 850,
      height = 350;
 
      //The number of columns and rows of the heatmap
      var MapColumns = 30,
      MapRows = 20;
 
      //The maximum radius the hexagons can have to still fit the screen
      var hexRadius = d3.min([width/((MapColumns + 0.5) * Math.sqrt(3)),
                  height/((MapRows + 1/3) * 1.5)]);
 
      //Calculate the center positions of each hexagon
      var points = [];
      for (var i = 0; i < MapRows; i++) {
      for (var j = 0; j < MapColumns; j++) {
          points.push([hexRadius * j * 1.75, hexRadius * i * 1.5]);
      }//for j
      }//for i
 
 
      //Create SVG element
      var svg = d3.select(mymap.getPanes().overlayPane).append("svg"),
      g = svg.append('g').attr('class', 'leaflet-zoom-hide')
      svg.attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
 
      //Set the hexagon radius
      var hexbin = d3.hexbin().radius(hexRadius);
 
      var color = d3.scaleLinear()
      .domain([0, 128, 255]) // Number of points in the bin?
      .range([
          "rgba(255,0,1,1)",
          "rgba(255,255,255,0)",
          "rgba(0,255,0,1)"
      ])
 
      //Draw the hexagons
      svg.append("g")
    .selectAll(".hexagon")
    .data(hexbin(points))
    .enter().append("path")
    .attr("class", "hexagon")
    .attr("d", function (d) {
    return "M" + d.x + "," + d.y + hexbin.hexagon();
    })
    .attr("stroke", "white")
    .attr("stroke-width", "1px")
    .style("fill", function(d, i) {
    return color(d.x)
    });

	slider = L.control.slider(function(value) {
    			console.log(value);
			}, {
    		min: 2000,
			max: 2030,
    		value: 2019,
			position: 'topright',
    		step: 1,
    		size: '300px',
    		orientation:'vertical',
			logo: 'Changes Over Time',
			title: 'Time frame',
    		id: 'slider'
		}).addTo(mymap);

		slider1 = L.control.slider(function(value) {
    			console.log(value);
			}, {
    		min: 10,
			max: 300,
    		value: 30,
			position: 'topleft',
    		step: 1,
    		size: '250px',
    		orientation:'vertical',
			logo: 'Population Density',
			title: 'Time frame',
    		id: 'slider1'
		}).addTo(mymap);

		slider2 = L.control.slider(function(value) {
    			console.log(value);
			}, {
    		min: 10000,
			max: 80000,
    		value: 40000,
			position: 'topleft',
    		step: 1,
    		size: '250px',
    		orientation:'vertical',
			logo: 'Purchasing Power',
			title: 'Time frame',
    		id: 'slider2'
		}).addTo(mymap);

		slider2 = L.control.slider(function(value) {
    			console.log(value);
			}, {
    		min: 300,
			max: 4000,
    		value: 1000,
			position: 'topleft',
    		step: 1,
    		size: '250px',
    		orientation:'vertical',
			logo: 'Congestion',
			title: 'Time frame',
    		id: 'slider2'
		}).addTo(mymap);


//     	var marker = L.marker([51.5, -0.09]).addTo(mymap);
//     	var circle = L.circle([51.508, -0.11], {
// 	color: 'red',
// 	fillColor: '#f03',
// 	fillOpacity: 0.5,
// 	radius: 500
// }).addTo(mymap);
//     	var polygon = L.polygon([
// 	[51.509, -0.08],
// 	[51.503, -0.06],
// 	[51.51, -0.047]
// ]).addTo(mymap);

//     	var popup = L.popup()
// 	.setLatLng([51.5, -0.09])
// 	.setContent("I am a standalone popup.")
// 	.openOn(mymap);

 var popup = L.popup();

function onMapClick(e) {
	popup
		.setLatLng(e.latlng)
		.setContent("You clicked the map at " + e.latlng.toString())
		.openOn(mymap);
}

mymap.on('click', onMapClick);






	</script>
	<style>
			.leaflet-control-slider {
				height: 100px;
				background-color: white; 
				padding: 15px;
				border-radius: 15px;
				box-shadow: 0px 0px 2px 2px rgb(138, 137, 137); 
			}
			
			.leaflet-control-slider-value {
				font-size: 15px;
				margin-left: 40%;
			}

			.leaflet-control-slider-toggle {
				font-size: 20px;
				font-weight: bold;
			}

			.leaflet-container a {
				color: black;
			}
		</style>
</html>
